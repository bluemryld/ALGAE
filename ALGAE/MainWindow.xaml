<Window x:Class="ALGAE.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:local="clr-namespace:ALGAE"
        xmlns:vm="clr-namespace:ALGAE.ViewModels"
        xmlns:views="clr-namespace:ALGAE.Views"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance Type=vm:MainViewModel, IsDesignTimeCreatable=False}"
        Style="{StaticResource MaterialDesignWindow}"
        Title="ALGAE - Advanced Launcher for Games and Associated Executables" 
        Height="900" Width="1200" 
        MinHeight="600" MinWidth="800">
  
  <Window.InputBindings>
    <KeyBinding Key="NumPad1" Modifiers="Ctrl" Command="{Binding NavigateToHomeCommand}"/>
    <KeyBinding Key="NumPad2" Modifiers="Ctrl" Command="{Binding NavigateToGamesCommand}"/>
    <KeyBinding Key="NumPad3" Modifiers="Ctrl" Command="{Binding NavigateToCompanionsCommand}"/>
    <KeyBinding Key="NumPad4" Modifiers="Ctrl" Command="{Binding NavigateToSignaturesCommand}"/>
    <KeyBinding Key="NumPad5" Modifiers="Ctrl" Command="{Binding NavigateToSettingsCommand}"/>
    <KeyBinding Key="NumPad6" Modifiers="Ctrl" Command="{Binding NavigateToLauncherCommand}"/>
    <KeyBinding Key="D1" Modifiers="Ctrl" Command="{Binding NavigateToHomeCommand}"/>
    <KeyBinding Key="D2" Modifiers="Ctrl" Command="{Binding NavigateToGamesCommand}"/>
    <KeyBinding Key="D3" Modifiers="Ctrl" Command="{Binding NavigateToCompanionsCommand}"/>
    <KeyBinding Key="D4" Modifiers="Ctrl" Command="{Binding NavigateToSignaturesCommand}"/>
    <KeyBinding Key="D5" Modifiers="Ctrl" Command="{Binding NavigateToSettingsCommand}"/>
    <KeyBinding Key="D6" Modifiers="Ctrl" Command="{Binding NavigateToLauncherCommand}"/>
    <KeyBinding Key="F5" Command="{Binding RefreshCurrentViewCommand}"/>
  </Window.InputBindings>
  
  <!-- DialogHost for Material Design Dialogs -->
  <materialDesign:DialogHost Identifier="RootDialog">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>

    <!-- Top Menu Bar -->
    <Menu Grid.Row="0">
      <MenuItem Header="_File">
        <MenuItem Header="_Manage Search Paths" Command="{Binding ManageSearchPathsCommand}">
          <MenuItem.Icon>
            <materialDesign:PackIcon Kind="FolderSearch" Width="16" Height="16"/>
          </MenuItem.Icon>
        </MenuItem>
        <Separator/>
        <MenuItem Header="E_xit" Command="{x:Static ApplicationCommands.Close}"/>
      </MenuItem>
      <MenuItem Header="_View">
        <MenuItem Header="_Home" 
                  Command="{Binding NavigateToHomeCommand}"
                  InputGestureText="Ctrl+1">
          <MenuItem.Icon>
            <materialDesign:PackIcon Kind="Home" Width="16" Height="16"/>
          </MenuItem.Icon>
        </MenuItem>
        <MenuItem Header="_Games" 
                  Command="{Binding NavigateToGamesCommand}"
                  InputGestureText="Ctrl+2">
          <MenuItem.Icon>
            <materialDesign:PackIcon Kind="Controller" Width="16" Height="16"/>
          </MenuItem.Icon>
        </MenuItem>
        <MenuItem Header="_Companions" 
                  Command="{Binding NavigateToCompanionsCommand}"
                  InputGestureText="Ctrl+3">
          <MenuItem.Icon>
            <materialDesign:PackIcon Kind="Apps" Width="16" Height="16"/>
          </MenuItem.Icon>
        </MenuItem>
        <MenuItem Header="_Signatures" 
                  Command="{Binding NavigateToSignaturesCommand}"
                  InputGestureText="Ctrl+4">
          <MenuItem.Icon>
            <materialDesign:PackIcon Kind="FileKey" Width="16" Height="16"/>
          </MenuItem.Icon>
        </MenuItem>
        <MenuItem Header="Se_ttings" 
                  Command="{Binding NavigateToSettingsCommand}"
                  InputGestureText="Ctrl+5">
          <MenuItem.Icon>
            <materialDesign:PackIcon Kind="Settings" Width="16" Height="16"/>
          </MenuItem.Icon>
        </MenuItem>
        <MenuItem Header="_Launcher" 
                  Command="{Binding NavigateToLauncherCommand}"
                  InputGestureText="Ctrl+6">
          <MenuItem.Icon>
            <materialDesign:PackIcon Kind="RocketLaunch" Width="16" Height="16"/>
          </MenuItem.Icon>
        </MenuItem>
        <Separator/>
        <MenuItem Header="_Refresh" 
                  Command="{Binding RefreshCurrentViewCommand}"
                  InputGestureText="F5">
          <MenuItem.Icon>
            <materialDesign:PackIcon Kind="Refresh" Width="16" Height="16"/>
          </MenuItem.Icon>
        </MenuItem>
      </MenuItem>
      <MenuItem Header="_Help">
        <MenuItem Header="_About ALGAE" />
      </MenuItem>
    </Menu>

    <!-- Main Content Area -->
    <Grid Grid.Row="1">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="250"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>

      <!-- Navigation Sidebar -->
      <materialDesign:Card Grid.Column="0" Margin="8">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <!-- Header -->
          <StackPanel Grid.Row="0" Orientation="Horizontal" 
                      Margin="16,16,16,8" VerticalAlignment="Center">
            <materialDesign:PackIcon Kind="Gamepad" 
                                     Width="32" Height="32" 
                                     Foreground="{DynamicResource PrimaryHueMidBrush}"/>
            <TextBlock Text="ALGAE" 
                       Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                       Margin="8,0,0,0" 
                       VerticalAlignment="Center"/>
          </StackPanel>

          <!-- Navigation Menu -->
          <ListBox Grid.Row="1" 
                   ItemsSource="{Binding MenuItems}"
                   SelectedItem="{Binding SelectedMenuItem, Mode=TwoWay}"
                   SelectionMode="Single"
                   Style="{StaticResource MaterialDesignNavigationPrimaryListBox}">
            <ListBox.ItemTemplate>
              <DataTemplate>
                <StackPanel Orientation="Horizontal" Margin="16,8">
                  <materialDesign:PackIcon Width="24" Height="24" 
                                           VerticalAlignment="Center">
                    <materialDesign:PackIcon.Style>
                      <Style TargetType="materialDesign:PackIcon">
                        <Style.Triggers>
                          <DataTrigger Binding="{Binding Name}" Value="Home">
                            <Setter Property="Kind" Value="Home"/>
                          </DataTrigger>
                          <DataTrigger Binding="{Binding Name}" Value="Games">
                            <Setter Property="Kind" Value="Controller"/>
                          </DataTrigger>
                          <DataTrigger Binding="{Binding Name}" Value="Signatures">
                            <Setter Property="Kind" Value="FileDocument"/>
                          </DataTrigger>
                          <DataTrigger Binding="{Binding Name}" Value="Companions">
                            <Setter Property="Kind" Value="Apps"/>
                          </DataTrigger>
                          <DataTrigger Binding="{Binding Name}" Value="Launcher">
                            <Setter Property="Kind" Value="RocketLaunch"/>
                          </DataTrigger>
                        </Style.Triggers>
                        <Setter Property="Kind" Value="Circle"/>
                      </Style>
                    </materialDesign:PackIcon.Style>
                  </materialDesign:PackIcon>
                  <TextBlock Text="{Binding Name}" 
                             Margin="16,0,0,0" 
                             VerticalAlignment="Center"
                             Style="{StaticResource MaterialDesignBody1TextBlock}"/>
                </StackPanel>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>
        </Grid>
      </materialDesign:Card>

      <!-- Content Area -->
      <materialDesign:Card Grid.Column="1" Margin="0,8,8,8">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <!-- Content Header -->
          <Border Grid.Row="0" 
                  Background="{DynamicResource PrimaryHueMidBrush}" 
                  Padding="16,12">
            <TextBlock Text="{Binding SelectedMenuItem.Name, FallbackValue='Welcome'}"
                       Foreground="White"
                       Style="{StaticResource MaterialDesignHeadline6TextBlock}"/>
          </Border>

          <!-- Dynamic Content -->
          <ContentPresenter Grid.Row="1" 
                            Content="{Binding CurrentView}" 
                            Margin="16"/>
        </Grid>
      </materialDesign:Card>
    </Grid>
    
    <!-- Snackbar for notifications -->
    <materialDesign:Snackbar Grid.Row="2" 
                             MessageQueue="{Binding ElementName=MainSnackbar, Path=MessageQueue}"
                             x:Name="MainSnackbar"/>
    </Grid>
  </materialDesign:DialogHost>
</Window>
